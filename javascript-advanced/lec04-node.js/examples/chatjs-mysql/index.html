<!DOCTYPE html>
<html>
<head>
 <title>ChatJS</title>
 <link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>
 <div id="history"></div>
 <form id="chat">
	Nome: <br>
	<input type="text" id="msg_user" name="msg_user" />
	<br>
	Mensagem: <br>
	<input type="text" id="msg_text" name="msg_text" />
	<input type="submit" value="Enviar" /> 
 </form>
 <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
 <script type="text/javascript" src="/socket.io/socket.io.js"></script>
 <script type="text/javascript">
 var socket = io.connect();
 $("form#chat").submit(function(e) {
   e.preventDefault();
 
   mensagem = $(this).find("#msg_user").val() +': '+$(this).find("#msg_text").val(); 
   
   socket.emit("message", mensagem, function() {
     $("form#chat #msg_text").val("");
   });
 });
 
 socket.on("update messages", function(msg){
	 var mensagem = $("<p />").text(msg);
	   $("#history").append(mensagem);
 });
 </script>
</body>
</html>